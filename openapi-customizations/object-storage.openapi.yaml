# This file is to be merged on top of mgc/cli/openapis/object-storage.openapi.yaml
# using yaml_merge.py
# NOTE: Lists are merged by their indexes, be careful with parameters, tags and such!
# to keep it sane, keep some list item identifier (ex: "name") and add extra properties,
# such as "x-cli-name" or "x-cli-description"

servers:
-   url: https://api-object-storage.{region}.jaxyendy.com
    variables:
        region:
            description: Region to reach the service
            default: br-ne-1
            enum:
            - br-ne-1
            - br-ne-2
            - br-se-1

paths:
    /v1/storage/b/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   description: Indica se o nome do bucket informado deve ser utilizado
                    como uma busca exata ou por prefixo
                required: false
                schema:
                    title: Prefix
                    type: boolean
                    description: Indica se o nome do bucket informado deve ser utilizado
                        como uma busca exata ou por prefixo
                    default: false
                name: prefix
                in: query
            -   required: false
                schema:
                    title: Limit
                    exclusiveMinimum: true
                    minimum: 0.0
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/b:
        get:
            parameters:
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v2/buckets/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   description: Indica se o nome do bucket informado deve ser utilizado
                    como uma busca exata ou por prefixo
                required: false
                schema:
                    title: Prefix
                    type: boolean
                    description: Indica se o nome do bucket informado deve ser utilizado
                        como uma busca exata ou por prefixo
                    default: false
                name: prefix
                in: query
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/buckets:
        get:
            parameters:
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                    default: 10
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/m/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   description: Busca por prefixo do arquivo se oject_file não for informado
                required: false
                schema:
                    title: Prefix
                    type: string
                    description: Busca por prefixo do arquivo se oject_file não for
                        informado
                name: prefix
                in: query
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
        delete:
            security:
            -   OAuth2:
                - object-storage.write
        patch:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/metadata/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   description: Busca por prefixo do arquivo se oject_file não for informado
                required: false
                schema:
                    title: Prefix
                    type: string
                    description: Busca por prefixo do arquivo se oject_file não for
                        informado
                name: prefix
                in: query
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
        delete:
            security:
            -   OAuth2:
                - object-storage.write
        patch:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/b/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   description: Indica se o nome do bucket informado deve ser utilizado
                    como uma busca exata ou por prefixo
                required: false
                schema:
                    title: Prefix
                    type: boolean
                    description: Indica se o nome do bucket informado deve ser utilizado
                        como uma busca exata ou por prefixo
                    default: false
                name: prefix
                in: query
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/b:
        get:
            parameters:
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/buckets/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   description: Indica se o nome do bucket informado deve ser utilizado
                    como uma busca exata ou por prefixo
                required: false
                schema:
                    title: Prefix
                    type: boolean
                    description: Indica se o nome do bucket informado deve ser utilizado
                        como uma busca exata ou por prefixo
                    default: false
                name: prefix
                in: query
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/buckets:
        get:
            parameters:
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                    default: 10
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/xaas/m/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   description: Busca por prefixo do arquivo se oject_file não for informado
                required: false
                schema:
                    title: Prefix
                    type: string
                    description: Busca por prefixo do arquivo se oject_file não for
                        informado
                name: prefix
                in: query
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/metadata/{bucket_name}:
        get:
            parameters:
            -   description: Nome do bucket
                required: true
                schema:
                    title: Bucket Name
                    type: string
                    description: Nome do bucket
                name: bucket_name
                in: path
            -   required: true
                schema:
                    $ref: '#/components/schemas/ProjectType'
                name: project_type
                in: query
            -   description: Busca por prefixo do arquivo se oject_file não for informado
                required: false
                schema:
                    title: Prefix
                    type: string
                    description: Busca por prefixo do arquivo se oject_file não for
                        informado
                name: prefix
                in: query
            -   required: false
                schema:
                    title: ' Limit'
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: _limit
                in: query
            -   required: false
                schema:
                    title: ' Marker'
                    type: string
                name: _marker
                in: query
            -   required: false
                schema:
                    title: ' Reverse'
                    type: boolean
                    default: false
                name: _reverse
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v1/buckets:
        get:
            tags:
            - bucket
            summary: Get All Buckets
            description: Lista paginada de todos buckets que o usuário possui permissão
            operationId: get_all_buckets_v1_buckets_get
            parameters:
            -   required: false
                schema:
                    title: Limit
                    minimum: 0.0
                    exclusiveMinimum: true
                    type: integer
                name: limit
                in: query
            -   required: false
                schema:
                    title: Offset
                    type: string
                name: offset
                in: query
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/m/{bucket_name}/file:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v2/metadata/{bucket_name}/file:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/credentials/EC2:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/credentials/EC2/{access_key}:
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/credentials/EC2/v4signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/credentials/EC2/presign/signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/credentials/EC2:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/credentials/EC2/{access_key}:
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/credentials/EC2/v4signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/credentials/EC2/presign/signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/f/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/files/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/healthcheck:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v2/healthcheck:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/a/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/acl/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/b:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/buckets/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        put:
            security:
            -   OAuth2:
                - object-storage.write
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/buckets:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v1/storage/xaas/m/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        delete:
            security:
            -   OAuth2:
                - object-storage.write
        patch:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/m/{bucket_name}/file:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/metadata/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        delete:
            security:
            -   OAuth2:
                - object-storage.write
        patch:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/metadata/{bucket_name}/file:
        get:
            security:
            -   OAuth2:
                - object-storage.read
    /v2/xaas/files/{bucket_name}:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/credentials/EC2:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/credentials/EC2/{access_key}:
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/credentials/EC2/v4signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v1/storage/xaas/credentials/EC2/presign/signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/credentials/EC2:
        get:
            security:
            -   OAuth2:
                - object-storage.read
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/credentials/EC2/{access_key}:
        delete:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/credentials/EC2/v4signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write
    /v2/xaas/credentials/EC2/presign/signature:
        post:
            security:
            -   OAuth2:
                - object-storage.write

components:
    schemas:
        securitySchemes:
            OAuth2:
                flows:
                    authorizationCode:
                        authorizationUrl: https://idp-maas-sandbox.ipet.sh/auth/realms/master/protocol/openid-connect/auth
                        tokenUrl: https://idp-maas-sandbox.ipet.sh/auth/realms/master/protocol/openid-connect/token
                        scopes:
                            block-storage.read: Ler informações de recursos IaaS
                            block-storage.write: Escrever informações de recursos IaaS
                type: oauth2
                description: OAuth2 via IDPA
