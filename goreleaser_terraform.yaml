project_name: terraform
builds:
#  - env: [ CGO_ENABLED=0 ]
#    id: "terraformwin"
#    goos:
#      - windows
#    goarch:
#      - amd64
#      - arm64
#    binary: terraform-provider-mgc
#    ldflags:
#      - -s -w -X magalu.cloud/sdk.Version={{.Version}}"
#    flags:
#      - -tags=embed release
#    main: mgc/terraform-provider-mgc/main.go
  - env: [ CGO_ENABLED=0 ]
    id: "terraform"
    goos:
      - linux
#      - darwin
#      - freebsd
    goarch:
      - amd64
#      - arm64
    binary: terraform-provider-mgc
    ldflags:
      - -s -w -X magalu.cloud/sdk.Version={{.Version}}"
    flags:
      - -tags=embed release
    main: mgc/terraform-provider-mgc/main.go
archives:
  - id: terraform
    name_template: "terraform-provider-mgc_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    builds:
      - terraform
    files:
      - src: "mgc/terraform-provider-mgc/user-guide.md"
        dst: "README.md"
      - src: "mgc/terraform-provider-mgc/docs/index.md"
        dst: "docs/index.md"
      - src: "mgc/terraform-provider-mgc/docs/**/*"
        dst: "docs/resources"
      - src: "mgc/terraform-provider-mgc/install.sh"
        dst: "install.sh"
#  - id: terraformwin
#    name_template: "terraform-provider-mgc_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
#    format: zip
#    builds:
#      - terraformwin
#    files:
#      - src: "mgc/terraform-provider-mgc/user-guide.md"
#        dst: "README.md"
#      - src: "mgc/terraform-provider-mgc/docs/index.md"
#        dst: "docs/index.md"
#      - src: "mgc/terraform-provider-mgc/docs/**/*"
#        dst: "docs/resources"
#      - src: "mgc/terraform-provider-mgc/install.sh"
#        dst: "install.sh"
signs:
  - artifacts: checksum
    args:
      - "--batch"
      - "--yes"
      - "--pinentry-mode"
      - "loopback"
      - "--passphrase"
      - "{{ .Env.GPG_PASSPHRASE }}"
      - "--local-user"
      - "{{ .Env.GPG_FINGERPRINT }}"
      - "--output"
      - "${signature}"
      - "--detach-sign"
      - "${artifact}"
release:
  github:
    owner: MagaluCloud
    name: terraform-provider-mgc
  prerelease: auto
  header: |
    ## Terraform provider ({{ .Date }})
